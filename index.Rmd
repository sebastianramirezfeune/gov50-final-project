---
title: "Race and Income in California"
author: "Sebastian Ramirez Feune"
description: "An examination of inequality in California"
output:
  distill::distill_article:
    self_contained: false
---
```{r include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE, 
  message = FALSE, 
  warning = FALSE, 
  fig.align = "center"
)
```


## Introduction

Despite its diverse population, California continues to be a center for significant social and economic inequality. Why is this so? It is common to look back to a history of oppression and discrimination that created institutions that continue to play integral roles in American society. This study aims to closely examine the relationship between race and income. How is income level generally related to race? And, what are some factors that may be impacting these income disparities? Thus, in addition to observing how income generally correlates with race, I will be simultaneously tracking how race is correlated with education level and unemployment. 

I contend that there were will be strong correlations made between income and racial identity in California, much like the rest of the United States. Black, Native American, and Hispanic/Latino communities will likely be in the lower ranks of income level, along with education and employment levels. This is largely due to historic discrimination of these two communities resulting in institutional biases and racism barring these demographics from many resources available to their Asian and white counterparts. While Asian Americans are people of color and recipients of institutionalized racism, their designation as “model minorities” and general arrival to the United States with high levels of education has aided in their ascension into higher income brackets. This is generally interesting because it gives concrete evidence and examples as to how the overall lack of access to resources has a strong link with the income inequality that we see in our nation.


## Data 

In this cross-sectional study, we are using two sources: 

1. The American Community Survey (ACS) of 2020 was used to attain  data on income, education, and unemployment

2. The Decennial Census of 2020 was used to attain data on racial identity

Both sources were merged together into the same data set.

I used four variables: race, income, education, and unemployment. The state that we will be specifically observing is California, narrowing the scope of the study. The key independent variable is race: Black, white, Hispanic, Asian, and Native American. Using these variables, we are able to measure the dependent variables, which include income, education, and unemployment. 

```{r}

library(tidyverse)
library(tidycensus)
library(sf)
library(ggplot2)

census_api_key('5e4ef03bc94c689219c200d6b833aa56803bb648')
```



```{r}
options(tigris_use_cache = TRUE)

ca_income <- get_acs(
  geography = "tract", 
  variables = c(income = "B19013_001",
  bachelor = "B06009_005", 
  unemployment = "B23025_005"),
  state = "CA", 
  year = 2020,
  geometry = TRUE
)


california_race <- get_decennial(
  geography = "tract", 
  state = "CA", 
  variables = c(
    Hispanic = "P2_002N",
    White = "P2_005N",
    Black = "P2_006N",
    Native = "P2_007N",
    Asian = "P2_008N",
    Total = "P2_001N"
  ),
  year = 2020,
  geometry = TRUE
)

```

```{r}
options(tigris_use_cache = TRUE)

ca_income1 <- get_acs(
  geography = "county", 
  variables = "B19013_001",
  state = "CA", 
  year = 2020,
  geometry = TRUE
)


```

```{r}
ca_income <- ca_income |>
  select(-moe) |>
  pivot_wider(
    names_from = "variable", 
    values_from = "estimate"
  )
california_race <- california_race |>
  pivot_wider(
    names_from = "variable", 
    values_from = "value")

cali_merge <- merge(x = as.data.frame(california_race), y = as.data.frame(ca_income), by.x = "GEOID", by.y = "GEOID")

cali_merge <- cali_merge |>
  mutate(percentage_white = (White/Total)*100, percentage_black = (Black/Total)*100, percentage_hispanic = (Hispanic/Total)*100, percentage_asian = (Asian/Total)*100, percentage_native = (Native/Total)*100, percentage_unemployed = (unemployment/Total)*100, percentage_bachelor = (bachelor/Total)*100)

```

```{r}
plot(ca_income["income"], main = "Average Income (in dollars) by California Tract")

plot(ca_income1["estimate"], main = "Average Income (in dollars) by California County")
```
```{r}
cali_race <- get_decennial(
  geography = "county", 
  state = "CA", 
  variables = c(
    Hispanic = "P2_002N",
    White = "P2_005N",
    Black = "P2_006N",
    Native = "P2_007N",
    Asian = "P2_008N"
  ),
  summary_var = "P2_001N",
  year = 2020,
  geometry = TRUE
) %>%
  mutate(percent = 100 * (value / summary_value))


```

```{r}
cali_race |>
  ggplot() +  
  geom_sf(aes(fill= percent)) +  
  scale_fill_viridis_c(option = "H") +  
  theme(axis.title.x=element_blank(),
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(), 
        axis.title.y=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks.y=element_blank()) + 
  labs(title = "Racial Distribution of California", fill = "Percent") + 
  facet_wrap(~variable, ncol = 2)
```


Above are three visuals of the primary dependent and independent variables: race and income. The first two maps illustrate the distribution of incomes throughout the state of California. While the study observes income distribution based on census tracts, one map shows distribution across counties as a simpler version of the census tract-based model. These models reveal how wealth tends to be concentrated in coastal regions, more specifically the San Francisco Bay Area.

The third map shows California's racial makeup throughout California counties (for simplicity sake). The race map shows the average racial makeup of each California tract/county, with Hispanic Californians spanning across California, especially near the coast, Southern California, and Central Valley. The second most prominent ethnic/racial group is white, with predominantly white tracts concentrating in more Eastern and Northern areas of the state. Asian Americans tend to be found near Los Angeles and the San Francisco Bay Area. Finally, the Black and Native Americans are relatively small throughout the state.

## Results
The following section presents the multivariate regression table and model of the data along with their interpretations.

### Multiple Regression

```{r, results = 'asis', echo = FALSE, eval=TRUE, warning = FALSE, message = FALSE}
##library(stargazer)

m.lm_black <-  lm(income ~  percentage_black + percentage_bachelor +  percentage_unemployed, data = cali_merge)

m.lm_white <- lm(income ~ percentage_bachelor +  percentage_unemployed + percentage_white, data = cali_merge)

m.lm_hisp <-  lm(income ~  percentage_hispanic + percentage_bachelor +  percentage_unemployed, data = cali_merge)

m.lm_asian <-  lm(income ~  percentage_asian + percentage_bachelor +  percentage_unemployed, data = cali_merge)

m.lm_native <-  lm(income ~  percentage_native + percentage_bachelor +  percentage_unemployed, data = cali_merge)

##stargazer(m.lm, type = "html")
library(modelsummary)
cm <- c("percentage_bachelor" = "Percentage Bachelor's", "percentage_unemployed" = "Percentage Unemployed", "percentage_black" = "Percentage Black", "percentage_white" = "Percentage White", "percentage_hispanic" = "Percentage Hispanic", "percentage_asian" = "Percentage Asian", "percentage_native" = "Percentage Native")
modelsummary(list("Tract Income 1" = m.lm_black, "Tract Income 2" =  m.lm_white, "Tract Income 3" =  m.lm_hisp, "Tract Income 4" =  m.lm_asian, "Tract Income 5" =  m.lm_native), coef_map = cm, stars = TRUE)
```

### Interpretation

This table illustrates the regressions of multiple variables in relation to income. All of the regression coefficients show strong correlations and significance, as indicated by the three asterisks adjacent to every value. These three asterisks indicate a p-value less than 0.001, implying very strong significance. Hence, it can be stated that all coefficients in the table have high statistical significance. 

The Black regression model indicates that, with explanatory variables of Bachelor's Degrees and unemployment held constant, for every single percentage increase in the Black population of a California tract, the income of the California tract is expected to decrease by about \$599.507. The Hispanic regression model indicates that, with explanatory variables of Bachelor's Degrees and unemployment held constant, for every single percentage increase in the Hispanic population of a California tract, the income of the California tract should decrease by about \$322.279. The final demographic to, according to the table, generally generate an average loss in income with an increase in its tract population in Native Americans. With explanatory variables of Bachelor's Degrees and unemployment held constant, for every single percentage increase in the Native population of a California tract, the income of a California tract is expected to decrease by about \$1466.654.

In contrast, the general demographics of white and Asian Californians show increases in tract income with increases in their share of the tract's population. The white regression model indicates that, with explanatory variables of Bachelor's Degrees and unemployment held constant, for every single percentage increase in the white population of a California tract, the income of the California tract should increase by about \$111.491. The Asian regression model indicates that, with explanatory variables of Bachelor's Degrees and unemployment held constant, for every single percentage increase in the Asian population of a California tract, the income of the California tract should increase by about \$396.996.

It is important to note that the regression table is staggered in structure. This is in order to reduce interactions between the racial demographic questions. Since these racial groups add to 100%, changing the value of one explanatory variable would necessarily change the outcomes of others. Therefore, in order to avoid this phenomenon, a staggered approach was applied that, when analyzing a specific racial demographic, only holds the Percentage Bachelor's and Percentage Unemployed constant.

### Plot Summary

```{r}
cali_plot <- ggplot(cali_merge, aes(y = Total)) + 
  geom_smooth(method = "lm", aes(x = percentage_white ), color = "orange", fill = "orange", alpha = 0.25) + 
  geom_smooth(method = "lm",aes(x = percentage_black), color = "purple", fill = "purple", alpha = 0.25) + 
  geom_smooth(method = "lm",aes(x =percentage_asian ), color = "turquoise", fill = "turquoise", alpha = 0.25) + 
  geom_smooth(method = "lm",aes(x = percentage_native), color = "blue", fill = "blue", alpha = 0.25)+
 geom_smooth(method = "lm",aes(x =percentage_hispanic ), color = "red", fill = "red", alpha = 0.25) +
   labs(x = "Percentage of Each Race (Tract)", y = "Income (in dollars)", title = "Tract Income across Racial Lines", caption = "Orange = white | Purple = Black | Turquoise = Asian | Blue = Native | Red = Hispanic") 
cali_plot 
```

### Interpretation

The figure above demonstrates the general relationship between racial composition of a tract and the tract's income. This model generates different trends from the previous regression as it holds it reveals a multivariate relationship without incorporation of the Bachelor's Degree and Unemployment variables. 

The model shows that Native Californians and white Californians tend to decrease the average incomes of their tracts. On the other hand, Asian, Black, and Hispanic communities all show general average income increases with the increase in their respective populations.

### Causality and Confounders

The intentions of the assignment were not to find a causal relationship. There was no way of controlling for potential confounders. This study was purely descriptive, demonstrating the general relationships between race and income. Human beings are not born with a tacit ability to earn higher incomes than others because of race.

Factors that may impact access to wealth are largely environmental include some of the other observed variables, such as education and employment. Nonetheless, trends within these confounding fields are also affected by institutional issues of racial discrimination, which affect certain communities differently. Drawing from the regression, communities with greater access to a college education and employment are more likely to have higher incomes. Effects of institutional racism can be far reaching into distinct neighborhoods and communities, under-funding them and affecting their access to resources necessary for financial success. 

## Conclusion

Our analysis has shown that race and income in California are both strongly correlated. When there is an increase in the population of Black, Hispanic, or Indigenous people in a Census tract, the average income level of the tract is expected to drop. Meanwhile, an increase in Asian and white Californians increase the average income. Race and income are inextricably tied, and they reflect a much broader American issue of racial discrimination. 

While observing these results, I understood the importance of measuring other predictor variables, such as education level and unemployment levels of a certain tract. The positive correlation between income and attainment of a Bachelor's degree indicates how education level is a potential factor that may largely influence the dichotomies in income that the various racial groups face. With unemployment levels holding a negative relationship with income, it is clear that higher levels of unemployment in certain communities may effect significant income losses.

Examining these separate variables is essential because there is no inherent reason for which certain demographics trend towards lower affluence in a state like California. In addition to be racial/ethnic minorities, there are also institutional obstacles that many families of color face. Asian American families hold a peculiar spot within this demographic, for they do face institutional racism, but in a different manner, with many white Americans using Asian Americans as "model minorities." 

### Potential Flaws

### Next Steps

