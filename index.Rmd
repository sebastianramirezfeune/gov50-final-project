---
title: "Gov 50 Final Project"
author: "Sebastian Ramirez Feune"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---


## Project thoughts

I am interested in exploring data related to race and Latinidad. I would like to find data on who identified as "Latino/Hispanic" in the most recent census in major cities across the USA. With this data, I would like to observe the racial proportions of those identifying as Latino or Hispanic: whether they identify as Black, White, Indigenous, Asian, Pacific Islander, or Other. Additionally, I would also like for my data to include their income levels. This way, I will be able to track the general regional trends of how Latinos across the USA racially identify, comparing Latinos in New York City to those in Los Angeles, and so on. My end goal is to see if there are any regional concentrations in the United States where Latinos identify as a certain race more than other regions, and if there is any link between the self-identified race and income level of those respondents. 

## Milestone 2
How have total incomes among members of different racial groups trended between the years 1970 and 2020? In this study, I will compare the growth of the average total incomes of five racial groups over a span of 50 years. I hypothesize that the US Census Bureau Data will reveal that generally, white and Asian US citizens have had steeper increases in income than Black and Hispanic communities. This argument is predicated on the presence of institutional racism in the United States. Likewise, the data will likely reflect the increasing racial wage gap that disproportionately affects Black and Hispanic Americans. The explanatory variables that I will look into are the different racial categorie. These would be the racial categories of “Black,” “White (Non-Hispanic),” “Asian,” Hispanic (All Races),” “Pacific Islander,” and “Other.” The outcome variable will be the total average income for the racial group. This will be measured in dollars over the 50 years between 1970 and 2020, spaced by one year increments. From here, I will look at the linear regression of the data over the years and see which racial groups have had the most dramatic/steepest growth. If the white and Asian American average total incomes tend to have steeper slopes than those for Black and Hispanic Americans, this will support my hypothesis that specifically disadvantaged groups, more specifically Hispanic and Black Americans, saw less dramatic total income growth in the last 50 years than white and Asian Americans. My hypothesis would be disproved if there were more dramatic growth within the Black and Hispanic demographic than the white and Asian. Furthermore, if there is a net decrease in income for any racial demographic over those 50 years, then that will further disprove my hypothesis. 


## Milestone 3

I have generated two plots with the information of the 2020 Census. The first plot shows a singular map of California, indicating each county's average level of income. My second plot shows five individual maps of California corresponding to a each of five racial group. The plots show the demographic percentages of each racial group residing in each of California's counties. 

My intention with this data is to compare each individual race plot with the income plot and recognize if there are any correlations between proportional racial identity and income level. These will be the two variables that I will be observing, how racial identity correlates with a county's average income level.

```{r}

library(tidyverse)
library(tidycensus)
library(sf)

census_api_key('5e4ef03bc94c689219c200d6b833aa56803bb648')
```

```{r}
options(tigris_use_cache = TRUE)

ca_income <- get_acs(
  geography = "county", 
  variables = "B19013_001",
  state = "CA", 
  year = 2020,
  geometry = TRUE
)

ca_income

```
```{r}
v17 <- load_variables(2017, "acs5", cache = TRUE)
v17 |>
  filter(grepl("income", label))
```


```{r}
plot(ca_income["estimate"], main = "Average Income by County")
```


```{r}
san_mateo_race <- get_decennial(
  geography = "county", 
  state = "CA", 
  variables = c(
    Hispanic = "P2_002N",
    White = "P2_005N",
    Black = "P2_006N",
    Native = "P2_007N",
    Asian = "P2_008N"
  ),
  summary_var = "P2_001N",
  year = 2020,
  geometry = TRUE
) %>%
  mutate(percent = 100 * (value / summary_value))


san_mateo_race
```


```{r}
san_mateo_race %>%
  ggplot() +  
  geom_sf(aes(fill= percent)) +  
  scale_fill_viridis_c(option = "H") +  
  theme(axis.title.x=element_blank(),
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(), 
        axis.title.y=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks.y=element_blank()) +
  facet_wrap(~variable, ncol = 2)
```

```{r}
options(tigris_use_cache = TRUE)

ca_income <- get_acs(
  geography = "tract", 
  variables = "B19013_001",
  state = "CA", 
  year = 2020,
  geometry = TRUE
)

ca_income

california_race <- get_decennial(
  geography = "tract", 
  state = "CA", 
  variables = c(
    Hispanic = "P2_002N",
    White = "P2_005N",
    Black = "P2_006N",
    Native = "P2_007N",
    Asian = "P2_008N",
    Total = "P2_001N"
  ),
  year = 2020,
  geometry = TRUE
)

california_race
```




```{r}
cali_merge <- merge(x = as.data.frame(california_race), y = as.data.frame(ca_income), by.x = "GEOID", by.y = "GEOID")
cali_merge <- cali_merge |>
  pivot_wider(
    names_from = variable.x, 
    values_from = value
  ) |>
  mutate(percentage_white = (White/Total)*100, percentage_black = (Black/Total)*100, percentage_hispanic = (Hispanic/Total)*100, percentage_asian = (Asian/Total)*100, percentage_native = (Native/Total)*100)
cali_merge
```



```{r}
m.lm <- lm(estimate ~  percentage_white + percentage_hispanic + percentage_black + percentage_asian, data = cali_merge)
summary(m.lm)
m.lm

```

This linear regression model indicates that 


```{r}
cali_plot <- ggplot(cali_merge, aes(estimate)) + 
  geom_smooth(aes(y =percentage_white ), color = "orange", fill = "orange") + 
  geom_smooth(aes(y = percentage_black), color = "purple", fill = "purple") + 
  geom_smooth(aes(y =percentage_asian ), color = "turquoise", fill = "turquoise") + 
  geom_smooth(aes(y = percentage_native), color = "blue", fill = "blue")+
 geom_smooth(aes(y =percentage_hispanic ), color = "red", fill = "red") +
   labs(x = "Income", y = "Percentage of Each Race", title = "Average Income per Population Percentage Based on Race") + 
  guides(fill = guide_legend(title = "Title"))
cali_plot
```


This graph illustrates the average income levels for Asian, Black, White, Hispanic, and Native residents of California according to the 2020 Census. The graph shows interesting implications of both economic inequity and racial proportions in the state of California. The graph indicates that both the Indigenous and Black populations are relatively low throughout California, with the Black population never exceeding 20% and the Indigenous population never exceeding 2% in any Census tract. 

The graph indicates that in low income regions where income is less than 100,000 dollars, these areas tend to be predominantly Hispanic American, especially around the 45,000 dollar annual income mark. Asian, Black, and white Americans tend to be the same population proportion at an income of zero, but they begin to diverge from here forward. Consistently, tracts where Asian and white Californians are more of a majority correspond with increasingly higher wages. Hence, the more white and Asian an area is, the more likely those whites and Asians are going to be affluent. On the other hand, in places were Black and Hispanic Californians make more money, especially after 150,000 dollars, they are likely to make up a smaller share of the population, at about 5% or less for Black Californians and about 15% or less for Latino Californians.

